I"„:<h2 id="setup">Setup</h2>

<p>For this exercise we will use Git.</p>

<p>Instructions for Windows:</p>
<ul>
  <li>Install Git for Windows: <a href="https://gitforwindows.org/">https://gitforwindows.org/</a></li>
  <li>This installs Git bash too. More info on Git bash: <a href="https://www.atlassian.com/git/tutorials/git-bash">https://www.atlassian.com/git/tutorials/git-bash</a></li>
  <li>Please run and check (and double check) that Git Bash works properly. Type <code class="language-plaintext highlighter-rouge">pwd</code> and see if you get a response.</li>
</ul>

<p>Instructions for Mac:</p>
<ul>
  <li>You should have Git installed by default</li>
  <li>Open a Terminal appilcation and type: <code class="language-plaintext highlighter-rouge">git --version</code> - if you get back something like <code class="language-plaintext highlighter-rouge">git version 2.24.3 (Apple Git-128)</code> you should be ok.</li>
  <li>If you donâ€™t have git or you have an older version, type <code class="language-plaintext highlighter-rouge">brew install git</code></li>
</ul>

<h2 id="preparing-the-exercise-artifacts">Preparing the exercise artifacts</h2>

<p>First, letâ€™s check some file navigation. Your current location:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">pwd</span>
</code></pre></div></div>

<p>List files in your current folder in two different formats:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls
ls</span> <span class="nt">-l</span>
</code></pre></div></div>

<p>To get the required artifacts (flat files for exercises) navigate to a folder suitable for exercises (like Documents, CEU class folder etc) and clone the course repo:</p>

<p>Example:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>Documents/
<span class="nb">mkdir </span>bash
git clone https://github.com/CEU-Economics-and-Business/ECBS-5146-Different-Shapes-of-Data
<span class="nb">cd </span>ECBS-5146-Different-Shapes-of-Data/artifacts/bash/
</code></pre></div></div>

<h2 id="basic-commands">Basic commands</h2>

<p><code class="language-plaintext highlighter-rouge">cat</code> -
Print the file to the screen.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>birdstrikes.csv
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">head</code> -
Print the first 3 lines to the file to the screen</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">head</span> <span class="nt">-n</span> 3 birdstrikes.csv
</code></pre></div></div>

<p>What is <code class="language-plaintext highlighter-rouge">-n</code>? Check it in the manual</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">head</span> <span class="nt">--help</span>
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">tail</code> -
Check the last 5 lines of the file</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tail</span> <span class="nt">-n</span> 5 birdstrikes.csv
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">&gt;</code> - Save the first 10 lines into another file (note that instead of -n 10, we used a simplified version)</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">head</span> <span class="nt">-10</span> birdstrikes.csv <span class="o">&gt;</span> first10.csv
</code></pre></div></div>
<p>list the result</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>first10.csv
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">|</code> - concatenating command. Show the 10th line only:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">head</span> <span class="nt">-n</span> 10 birdstrikes.csv | <span class="nb">tail</span> <span class="nt">-n</span> 1
</code></pre></div></div>

<blockquote class="challenge">
  <h2 id="exercise-1">Exercise 1</h2>
  <p>Copy the 6th and 7th line of birdstrikes into the myprettypony.csv</p>
</blockquote>

<h2 id="filtering">Filtering</h2>

<p><code class="language-plaintext highlighter-rouge">grep</code> -
Only show incidents from California</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>birdstrikes.csv | <span class="nb">grep </span>California 
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">grep -v</code> -
Only show incidents NOT with California</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>birdstrikes.csv | <span class="nb">grep</span> <span class="nt">-v</span> California
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">grep -i</code> -
Ignore case</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>birdstrikes.csv | <span class="nb">grep</span> <span class="nt">-i</span> CALIFORNIA
</code></pre></div></div>

<h2 id="word-count">Word count</h2>

<p><code class="language-plaintext highlighter-rouge">wc</code> - show the line, word and character count of birdstrikes</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">wc </span>birdstrikes.csv
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">wc -l</code>
shows only the line count</p>

<blockquote class="challenge">
  <h2 id="exercise-2">Exercise 2</h2>
  <p>How many words we have in the first 10 lines of birdstrikes?</p>
</blockquote>

<blockquote class="challenge">
  <h2 id="exercise-3">Exercise 3</h2>
  <p>How many incidents were in California (only output line count)</p>
</blockquote>

<h2 id="cut--printing-out-parts-of-a-line">Cut / printing out parts of a line</h2>

<p>What is name of the 1st column:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>birdstrikes.csv | <span class="nb">cut</span> <span class="nt">-d</span> <span class="s1">';'</span> <span class="nt">-f1</span> | <span class="nb">head</span> <span class="nt">-1</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">cut</code> - Display the first 10 records of <em>damage</em> (column 4) and the <em>cost</em> (column 10) columns</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>birdstrikes.csv | <span class="nb">cut</span> <span class="nt">-d</span> <span class="s1">';'</span> <span class="nt">-f4</span>,10 | <span class="nb">head</span> <span class="nt">-11</span>
</code></pre></div></div>

<p>Similar to previous example, but now writing all columns, except <em>damage</em> (column 4) and <em>cost</em> (column 10) into a new file:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>birdstrikes.csv | <span class="nb">cut</span> <span class="nt">-d</span> <span class="s1">';'</span> <span class="nt">--complement</span> <span class="nt">-f4</span>,10 <span class="o">&gt;</span> new.csv
<span class="nb">cat </span>birdstrikes.csv | <span class="nb">cut</span> <span class="nt">-d</span> <span class="s1">';'</span> <span class="nt">-f1-3</span>,5-9,11- <span class="o">&gt;</span> new.csv

<span class="nb">head</span> <span class="nt">-5</span> new.csv

</code></pre></div></div>

<blockquote class="challenge">
  <h2 id="exercise-4">Exercise 4</h2>
  <p>Write 17th record of <em>state</em> and the <em>bird size</em> columns from birdstrikes, in file called <em>onerepublic.csv</em>. What is the result if run â€˜cat onerepublic.csvâ€™?</p>
</blockquote>

<h2 id="sorting">Sorting</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sort </span>birdstrikes.csv | <span class="nb">head</span> <span class="nt">-10</span>
<span class="nb">sort</span> <span class="nt">-n</span> birdstrikes.csv | <span class="nb">head</span> <span class="nt">-10</span>
</code></pre></div></div>

<p>Reverse sort by <em>damage</em> (column 4)</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>birdstrikes.csv | <span class="nb">sort</span> <span class="nt">-t</span> <span class="s1">';'</span> <span class="nt">-k4</span> <span class="nt">-r</span> | <span class="nb">head</span> <span class="nt">-10</span> 
</code></pre></div></div>

<blockquote class="challenge">
  <h2 id="exercise-5">Exercise 5</h2>
  <p>What was the cost of the most expensive incident?</p>
</blockquote>

<h2 id="distinctunique-values">Distinct/Unique values</h2>

<p><code class="language-plaintext highlighter-rouge">sort | uniq</code> - 
Distinct states in birdstrikes:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>birdstrikes.csv | <span class="nb">cut</span> <span class="nt">-d</span> <span class="s1">';'</span> <span class="nt">-f6</span> | <span class="nb">sort</span> | <span class="nb">uniq</span> | <span class="nb">wc</span> <span class="nt">-l</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">uniq -c</code> -
How many incidents were there by state?</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tail</span> <span class="nt">-n</span>+2 birdstrikes.csv | <span class="nb">cut</span> <span class="nt">-d</span> <span class="s1">';'</span> <span class="nt">-f6</span> | <span class="nb">sort</span> | <span class="nb">uniq</span> <span class="nt">-c</span>
</code></pre></div></div>

<h2 id="scripts">Scripts</h2>
<blockquote class="callout">
  <h2 id="sentiment-analysis">Sentiment analysis</h2>
  <p>In the next example, we would like to present a small script for sentiment analysis of books. You will see, that using the commands above and adding a bit of procedural logic by bash scripting, we can easily create a basic sentiment analyzer.
<br /></p>

  <p>This script is focusing on counting certain negative words and calculating the ratio against the number of words in a book. The script could be improved (as the image below suggests) to look for context, distribution in time and ultimately check the positive words as well, for a bit more balanced analytics.</p>

  <p><img src="https://peerchristensen.netlify.app/post/2018-06-07-fair-is-foul-and-foul-is-fair-a-tidytext-entiment-analysis-of-shakespeare-s-tragedies_files/figure-html/unnamed-chunk-11-1.png" alt="" />
Source of image: <a href="https://peerchristensen.netlify.app/post/fair-is-foul-and-foul-is-fair-a-tidytext-entiment-analysis-of-shakespeare-s-tragedies/">Fair is foul, and foul is fair: a tidytext sentiment analysis of Shakespeareâ€™s tragedies</a></p>
</blockquote>

<p><br /><br /></p>

<p>First, we create the file for the script:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano sentiment.sh
</code></pre></div></div>

<p>Then, here is the script itself:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">dictionary</span><span class="o">=(</span>sad sorrow death dead pain poor misery<span class="o">)</span>
<span class="nv">totalcount</span><span class="o">=</span>0

<span class="k">for </span>i <span class="k">in</span> <span class="s2">"</span><span class="k">${</span><span class="nv">dictionary</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span><span class="p">;</span> 
<span class="k">do</span>
	<span class="o">((</span><span class="nv">wordcount</span><span class="o">=</span><span class="si">$(</span><span class="nb">grep</span> <span class="nt">-o</span> <span class="nt">-c</span> <span class="nv">$i</span> <span class="nv">$1</span><span class="si">)</span><span class="o">))</span>
	<span class="o">((</span>totalcount+<span class="o">=</span><span class="nv">$wordcount</span><span class="o">))</span>
	<span class="nb">echo</span> <span class="nv">$i</span>:<span class="nv">$wordcount</span>
<span class="k">done

</span><span class="nv">words</span><span class="o">=(</span><span class="si">$(</span><span class="nb">wc</span> <span class="nt">-w</span> <span class="nv">$1</span><span class="si">)</span><span class="o">)</span>
<span class="nv">ratio</span><span class="o">=</span><span class="k">$((</span><span class="nv">$words</span><span class="o">/</span><span class="nv">$totalcount</span><span class="k">))</span>

<span class="nb">echo</span> <span class="nt">---</span>
<span class="nb">echo </span>total:<span class="nv">$totalcount</span>
<span class="nb">echo </span>words:<span class="nv">$words</span>
<span class="nb">echo </span>ratio:<span class="nv">$ratio</span>

<span class="nb">echo</span> <span class="nt">---</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$ratio</span><span class="s2">"</span> <span class="nt">-gt</span> 1000 <span class="o">]</span><span class="p">;</span> <span class="k">then
	</span><span class="nb">echo </span>Sentiment: this book is not sad
<span class="k">else
	</span><span class="nb">echo </span>Sentiment: this book is sad
<span class="k">fi</span>
</code></pre></div></div>

<p>On the end, we run the script with a book stored in txt format:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sh sentiment.sh Hamlet.txt
</code></pre></div></div>

<blockquote class="callout">
  <h2 id="book-recommendation">Book recommendation</h2>

  <p>If you want to get deeper into the magic land of command lines, a new book is available for free: <a href="https://www.datascienceatthecommandline.com/1e/index.html">Data Science at the Command Line</a></p>

</blockquote>

<blockquote class="challenge">
  <h2 id="homework-optional-no-need-to-submit">Homework (Optional, no need to submit)</h2>

  <ul>
    <li>Show the first 3 Helicopter incidents outside of Colorado</li>
    <li>How many incidents did happen were cost is bigger than 0</li>
    <li>In which Area did the most expensive incident happen that was caused by a Small bird?</li>
  </ul>
</blockquote>

:ET